<!DOCTYPE html>
    <html>
        <head>
            <title>Real-time Dictation App</title>
            <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
            <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
            <style>
                body {
                    margin: 0;
                    font-family: sans-serif;
                }

                form {
                    position: fixed;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    display: flex;
                    box-sizing: border-box;
                    padding: 0.25rem;
                }

                form input {
                    border: 0;
                    padding: 0.5rem;
                    width: 100%;
                    outline: 0;
                    margin-right: 0.5rem;
                    border-radius: 0.25rem;
                    background: #ccc;
                }

                form button {
                    width: 6rem;
                    background-color: #1b8c00;
                    color: white;
                    border: none;
                    padding: 0.5rem;
                    cursor: pointer;
                    border-radius: 0.25rem;
                    text-transform: uppercase;
                }

                form button:hover {
                    background-color: #166d01;
                }

                .messages {
                    margin: 0;
                    padding: 0;
                    margin-bottom: 3rem;
                }

                .messages li {
                    padding: 0.5rem;
                }

                .messages li:nth-child(odd) {
                    background: #eee;
                }
            </style>
        </head>
        <body>
            <ul class="messages"></ul>
            <form>
                <button onclick="speakNextWord();">Next word</button>
                <input type="text" class="input" autocomplete="off" autofocus />
                <button id='sendBtn'>Send</button>
            </form>
            <script>
                const form = document.querySelector("form");
                const input = document.querySelector(".input");
                const messages = document.querySelector(".messages");
                
                $.get('words.txt', function(data) {
                    words = data.split("\n");
                    console.log(JSON.stringify(words));
                });
                
                document.getElementById('sendBtn').addEventListener("click", function(event) {
                    event.preventDefault();
                    const nextWord = window.sessionStorage.getItem("nextWord");
                    const status = input.value == nextWord ? 'RIGHT' : 'WRONG';
                    addMessage(input.value + ':' + status);
                    input.value = "";
                    return false;
                }, false);

                function addMessage(message) {
                    const li = document.createElement("li");
                    li.innerHTML = message;
                    messages.appendChild(li);
                    //window.scrollTo(0, document.body.scrollHeight);
                }
                
                function speakNextWord(){
                    event.preventDefault();
                    let next = Math.floor((Math.random() * words.length));
                    const nextWord = words.splice(next, next)[0];
                    speak(nextWord);
                    window.sessionStorage.setItem("nextWord", nextWord);
                    return false;
                }
                
                function speak(text){
                    speechSynthesis.speak(new SpeechSynthesisUtterance(text));
                }
            </script>
        </body>
    </html>
